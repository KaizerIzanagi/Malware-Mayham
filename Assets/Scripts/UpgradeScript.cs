using System.Collections;
using System.Collections.Generic;
using TMPro;
using UnityEngine;

public class UpgradeScript : MonoBehaviour
{
    [Header("Local Points")]
    public GameObject PointsShopUI;
    public TextMeshProUGUI pointsShopText;
    [Header("Costs")]
    public int hpBaseCost, powerBaseCost, speedBaseCost;
    public int hpCostUp = 20, powerCostUp = 50, speedCostUp = 25;
    public GameObject hpCost, powerCost, speedCost;
    public TextMeshProUGUI hpCostText, powerCostText, speedCostText;
    [Header("Called Scripts")]
    public GameOverScript gameOverScript;
    public GameScript gameScript;
    public PlayerScript playerScript;
    public MenuScript menuScript;
    public PlayerRigidBody playerRigidBody;

    void Update()
    {
        pointsShopText.text = "Points to Spend: " + gameScript.points.ToString();
        hpCostText.text = "Cost: " + hpBaseCost.ToString();
        powerCostText.text = "Cost: " + powerBaseCost.ToString();
        speedCostText.text = "Cost: " + speedBaseCost.ToString();
    }

    public void UpgradeHealth()
    {
        if (gameScript.points >= hpBaseCost)
        {
            gameScript.points -= hpBaseCost;
            hpBaseCost += hpCostUp;
            playerScript.maxHealth += 10;
        }
    }

    public void UpgradePointGain() 
    {
        if (gameScript.points >= powerBaseCost)
        {
            gameScript.points -= powerBaseCost;
            powerBaseCost += powerCostUp;
            gameScript.pointsGained += 10;
        }
    }

    public void UpgradeSpeed()
    {
        if (gameScript.points >= speedBaseCost)
        {
            gameScript.points -= speedBaseCost;
            speedBaseCost += speedCostUp;
            playerRigidBody.speed += 5;
        }
    }

    public void BackToGame()
    {
        gameOverScript.RestartValues();
        menuScript.upgradeMenu.SetActive(false);
        menuScript.gameProper.SetActive(true);
    }
}
