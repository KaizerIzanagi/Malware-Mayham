using System.Collections;
using System.Collections.Generic;
using TMPro;
using UnityEngine;
using UnityEngine.UI;

public class GameScript : MonoBehaviour
{
    [Header("Detection Values")]
    public int minDetection = 0;
    public int maxDetection = 100;
    public int currentDetection;
    [Header("Point Tracker")]
    public GameObject PointsUI;
    public TextMeshProUGUI pointsText;
    public int points;
    public int pointsGained = 100;
    [Header("Warning Flash")]
    public GameObject warningFlash;
    [Header("Called Scripts")]
    public DetectionBar detectionBar;
    public EnemyScript enemyScript;
    public PlayerScript playerScript;
    public MenuScript menuScript;


    void Start()
    {
        currentDetection = 0;
        detectionBar.SetDetection(currentDetection);
    }

    // Update is called once per frame
    void Update()
    {
        pointsText.text = "Points: " + points.ToString();
        if (Input.GetKeyDown(KeyCode.Space))
        {
            IncreaseDetection(10);
            WarningFlash();
            GameWarning();
            GainPoints();
            playerScript.TakeDamage(10);
        }
    }

    void IncreaseDetection(int detection)
    {
        currentDetection += detection;

        detectionBar.SetDetection(currentDetection);
    }

    public void GainPoints()
    {
        points += pointsGained;
    }
    public void WarningFlash()
    {
        if (warningFlash != null)
        {
            if (warningFlash.GetComponent<Image>().color.a > 0)
            {
                var color = warningFlash.GetComponent<Image>().color;

                color.a -= 0.01f;

                warningFlash.GetComponent<Image>().color = color;
            }
        }
    }
    public void GameWarning()
    {
        var color = warningFlash.GetComponent<Image>().color;
        color.a = 0.8f;

        warningFlash.GetComponent<Image>().color = color;
    }

    
}
